---
import MenuToggle from "./MenuToggle.astro";
import HeaderLinks from "./HeaderLinks.astro";
import ThemeToggle from "./ThemeToggle.astro";
import SearchLogo from "~icons/ic/baseline-search";
import RssIcon from "@components/common/RssIcon.astro";
---

<header class="py-1 bg-base-200">
	<div class="container mx-auto flex justify-between flex-wrap">
		<div class="my-auto flex w-1/4">
			<a
				href="/"
				class="btn btn-ghost normal-case text-2xl md:text-3xl font-bold">
				EloToJa
			</a>
			<div class="my-auto hidden md:block">
				<RssIcon />
			</div>
		</div>
		<div class="md:hidden my-auto mr-3 flex">
			<MenuToggle />
		</div>
		<navbar id="navbar" class="hidden md:flex w-full md:w-3/4 justify-end">
			<nav class="mx-auto w-min md:mx-0 md:w-max">
				<HeaderLinks
					ulClass="menu menu-vertical md:menu-horizontal p-2 rounded-box text-lg"
					liClass="hover:bg-base-300 rounded-md mx-auto w-min"
					activeClass="font-bold underline underline-offset-4"
				/>
			</nav>
			<div class="flex w-min mx-auto md:mx-0 md:w-max gap-x-2">
				<button aria-label="Search posts">
					<a href="/search" title="Search">
						<SearchLogo />
					</a>
				</button>
				<ThemeToggle />
			</div>
		</navbar>
	</div>
</header>

<script>
	let open = false;
	const navbar = document.getElementById("navbar");
	const menuButton = document.getElementById("hamburger-button");

	menuButton?.addEventListener("click", () => {
		open = !open;
		menuButton?.setAttribute("aria-expanded", open.toString());
		menuButton?.setAttribute("aria-label", open ? "close menu" : "open menu");
		menuButton?.classList.toggle("swap-active");
		navbar?.classList.toggle("hidden");
	});
</script>
