---
import Pagination from "@components/posts/Pagination.astro";
import PostCards from "@components/posts/PostCards.astro";
import { POSTS_PER_PAGE } from "@config";
import MainLayout from "@layouts/MainLayout.astro";
import BlogCollection from "@utils/blog";

const blogCollection = new BlogCollection();
await blogCollection.getCollection();

const currentPage = 1;
const lastPage = blogCollection.lastPage(POSTS_PER_PAGE);

const posts = blogCollection.getPage(currentPage, POSTS_PER_PAGE);
---

<MainLayout title="Posts">
  <h1 class="mt-8">Page {currentPage}</h1>
  <PostCards posts={posts} sectionName="posts" />
  <Pagination lastPage={lastPage} currentPage={currentPage} />
</MainLayout>
